<div class="character-list">
  @switch ((viewState$ | async)?.state) {
    @case (ViewState.LOADING) {
      <div class="character-list__loading">
        <div class="character-list__loading-spinner"></div>
        <p class="character-list__loading-text">Loading characters...</p>
      </div>
    }
    @case (ViewState.ERROR) {
      <div class="character-list__error">
        <div class="character-list__error-icon">⚠️</div>
        <p class="character-list__error-message">
          Error loading characters: {{ (viewState$ | async)?.error }}
        </p>
      </div>
    }
    @case (ViewState.CONTENT) {
      <div class="character-list__header">
        <h2 class="character-list__title">Characters</h2>
        <p class="character-list__subtitle">Explore the Rick and Morty universe</p>

        <app-character-filter (filterChange)="onFilterChange($event)"></app-character-filter>
      </div>
      <div
        class="character-list__grid"
        infiniteScroll
        [scrollWindow]="false"
        (scrolled)="onScroll()"
      >
        @for (character of characters$ | async; track character.id) {
          <app-character-card
            [character]="character"
            (click)="onCardSelected(character.id)"
          ></app-character-card>
        }
      </div>
    }
  }
</div>
